# ‚úÖ Attendance –º–∞–∞–ª—ã–º–∞—Ç—ã –æ“£–¥–æ–æ - –ß–µ—á–∏–ª–¥–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ê—Ç–∞-—ç–Ω–µ –∂–∞–Ω–∞ —Å—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä “Ø—á“Ø–Ω —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–µ—Ç–∏–Ω–¥–µ **–∞–∫—ã—Ä–∫—ã –∂—É–º–∞–ª—ã–∫ –∫–∞—Ç—ã—à—É—É –Ω–∞—Ç—ã–π–∂–∞—Å—ã** –∫”©—Ä—Å”©—Ç“Ø–ª“Ø—à“Ø –∫–µ—Ä–µ–∫ –±–æ–ª—á—É, –±–∏—Ä–æ–∫ –±—É–ª —Ñ—É–Ω–∫—Ü–∏—è —Ç—É—É—Ä–∞ –∏—à—Ç–µ–±–µ–π –∂–∞—Ç—á—É.

## üîç –¢–∞–±—ã–ª–≥–∞–Ω –º–∞—Å–µ–ª–µ

`backend/core/serializers.py` —Ñ–∞–π–ª—ã–Ω–¥–∞–≥—ã `ScheduleSerializer` –∏—á–∏–Ω–¥–µ `attendance_status` –∂–∞–Ω–∞ `attendance_text` –ø–æ–ª–µ–ª–µ—Ä–∏ –∂–æ–∫ –±–æ–ª–≥–æ–Ω.

Schedule API endpoint'–∏ (`/v1/schedules/`) –±—É–ª –º–∞–∞–ª—ã–º–∞—Ç—Ç—ã –∫–∞–π—Ç–∞—Ä–≥–∞–Ω —ç–º–µ—Å.

## ‚úÖ –ö–∏—Ä–≥–∏–∑–∏–ª–≥–µ–Ω –æ“£–¥–æ–æ–ª–æ—Ä

### 1. Backend (serializers.py)

#### –ö–æ—à—É–ª–≥–∞–Ω –ø–æ–ª–µ–ª–µ—Ä:
```python
# Attendance –º–∞–∞–ª—ã–º–∞—Ç—ã (–∞–∫—ã—Ä–∫—ã –∂—É–º–∞ “Ø—á“Ø–Ω)
attendance_status = serializers.SerializerMethodField()
attendance_text = serializers.SerializerMethodField()
```

#### –ö–æ—à—É–ª–≥–∞–Ω –º–µ—Ç–æ–¥–¥–æ—Ä:
1. **`get_attendance_status()`** - –°—Ç—É–¥–µ–Ω—Ç “Ø—á“Ø–Ω –∞–∫—ã—Ä–∫—ã –∂—É–º–∞–ª—ã–∫ attendance —Å—Ç–∞—Ç—É—Å—É–Ω –∞–ª–∞—Ç:
   - –£—á—É—Ä–¥–∞–≥—ã –∂—É–º–∞–Ω—ã–Ω –±–∞—à—Ç–∞–ª—ã—à—ã–Ω —ç—Å–µ–ø—Ç–µ–π—Ç (–î“Ø–π—à”©–º–±“Ø)
   - –ñ—É–º–∞–Ω—ã–Ω –∞—è–≥—ã–Ω —ç—Å–µ–ø—Ç–µ–π—Ç (–ñ–µ–∫—à–µ–º–±–∏)
   - –£—à—É–ª —É–±–∞–∫—ã—Ç –∞—Ä–∞–ª—ã–≥—ã–Ω–¥–∞ attendance –º–∞–∞–ª—ã–º–∞—Ç—ã–Ω —Ç–∞–±–∞—Ç
   - –°–æ“£–∫—É attendance'—Ç—ã–Ω —Å—Ç–∞—Ç—É—Å—É–Ω –∫–∞–π—Ç–∞—Ä–∞—Ç (Present/Absent/Late/Excused)

2. **`get_attendance_text()`** - Attendance —Å—Ç–∞—Ç—É—Å—É–Ω—É–Ω —Ç–µ–∫—Å—Ç–∏–Ω –∫–æ—Ç–æ—Ä–º–æ –º–µ–Ω–µ–Ω –∫–∞–π—Ç–∞—Ä–∞—Ç:
   - Present ‚Üí "–ö–∞—Ç—ã—à–∫–∞–Ω"
   - Absent ‚Üí "–ö–∞—Ç—ã—à–ø–∞–≥–∞–Ω"
   - Late ‚Üí "–ö–µ—á–∏–∫–∫–µ–Ω"
   - Excused ‚Üí "–°–µ–±–µ–ø—Ç“Ø“Ø"
   - None ‚Üí "–ë–µ–ª–≥–∏–ª–µ–Ω–µ —ç–ª–µ–∫"

### 2. –õ–æ–≥–∏–∫–∞

```python
# –£—á—É—Ä–¥–∞–≥—ã –∂—É–º–∞–Ω—ã–Ω –±–∞—à—Ç–∞–ª—ã—à—ã (–î“Ø–π—à”©–º–±“Ø)
today = date.today()
week_start = today - timedelta(days=today.weekday())

# –ñ—É–º–∞–Ω—ã–Ω –∞—è–≥—ã (–ñ–µ–∫—à–µ–º–±–∏)
week_end = week_start + timedelta(days=6)

# Attendance —Ç–∞–±—É—É
latest_attendance = Attendance.objects.filter(
    student=target_student,
    subject=obj.subject,
    date__range=[week_start, week_end]
).order_by('-date').first()
```

### 3. –ö–æ–ª–¥–æ–Ω—É–ª—É—É—á—É —Ä–æ–ª–¥–æ—Ä—É

- **STUDENT**: ”®–∑“Ø–Ω“Ø–Ω attendance'—ã–Ω –∫”©—Ä”©—Ç
- **PARENT**: –ë–∞–ª–¥–∞—Ä—ã–Ω—ã–Ω attendance'—ã–Ω –∫”©—Ä”©—Ç (group –±–æ—é–Ω—á–∞ —Ñ–∏–ª—å—Ç—Ä–ª–µ–Ω–µ—Ç)
- **TEACHER/ADMIN/MANAGER**: Attendance –º–∞–∞–ª—ã–º–∞—Ç—ã –∫”©—Ä—Å”©—Ç“Ø–ª–±”©–π—Ç (–∞–ª–∞—Ä ”©–∑–¥”©—Ä“Ø –±–µ–ª–≥–∏–ª–µ–π—Ç)

## üìä –ò—à—Ç–µ—à –ø—Ä–∏–Ω—Ü–∏–±–∏

1. Frontend `/v1/schedules/?group=<group_id>` API'–≥–µ –∑–∞–ø—Ä–æ—Å –∂–∞—Å–∞–π—Ç
2. Backend `ScheduleSerializer` –∫–æ–ª–¥–æ–Ω—É–ª–∞—Ç
3. Serializer request.user'–¥–∏–Ω —Ä–æ–ª—É–Ω —Ç–µ–∫—à–µ—Ä–µ—Ç
4. –≠–≥–µ—Ä STUDENT –∂–µ PARENT –±–æ–ª—Å–æ:
   - –£—á—É—Ä–¥–∞–≥—ã –∂—É–º–∞–Ω—ã —ç—Å–µ–ø—Ç–µ–π—Ç
   - Attendance —Ç–∞–±–∞—Ç
   - Status –∂–∞–Ω–∞ text –∫–∞–π—Ç–∞—Ä–∞—Ç
5. Frontend –±—É–ª –º–∞–∞–ª—ã–º–∞—Ç—Ç—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–µ—Ç–∏–Ω–¥–µ –∫”©—Ä—Å”©—Ç”©—Ç

## üé® Frontend –∫”©—Ä“Ø–Ω“Ø—à“Ø

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±–µ—Ç–∏–Ω–¥–µ –∞—Ä –±–∏—Ä —Å–∞–±–∞–∫ “Ø—á“Ø–Ω:
```jsx
<div className={`lesson-attendance ${
  lesson.attendance_status === 'Present' ? 'attendance-present' :
  lesson.attendance_status === 'Absent' ? 'attendance-absent' :
  lesson.attendance_status === 'Late' ? 'attendance-late' :
  'attendance-unknown'
}`}>
  {lesson.attendance_status === 'Present' && '‚úÖ '}
  {lesson.attendance_status === 'Absent' && '‚ùå '}
  {lesson.attendance_status === 'Late' && '‚è∞ '}
  {lesson.attendance_text || t('attendanceMarked')}
</div>
```

## üß™ –¢–µ–∫—à–µ—Ä“Ø“Ø

### –õ–æ–∫–∞–ª–¥—ã–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. **Backend –±–∞—à—Ç–∞–ª—É—É–¥–∞**:
   ```bash
   cd backend
   python3 manage.py runserver
   ```
   –°–µ—Ä–≤–µ—Ä: http://127.0.0.1:8000/

2. **Frontend –±–∞—à—Ç–∞–ª—É—É–¥–∞**:
   ```bash
   cd frontend
   npm run dev
   ```
   –°–µ—Ä–≤–µ—Ä: http://localhost:5173/

3. **–¢–µ—Å—Ç–∏—Ä–ª”©”© –∫–∞–¥–∞–º–¥–∞—Ä—ã**:
   - –°—Ç—É–¥–µ–Ω—Ç –∂–µ –∞—Ç–∞-—ç–Ω–µ –∫–∞—Ç–∞—Ä—ã –∫–∏—Ä–∏“£–∏–∑
   - Schedule –±–µ—Ç–∏–Ω–µ ”©—Ç“Ø“£“Ø–∑
   - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ–Ω–∏ –∫–∞—Ä–∞–ø –∫”©—Ä“Ø“£“Ø–∑
   - –ê—Ä –±–∏—Ä —Å–∞–±–∞–∫ “Ø—á“Ø–Ω attendance —Å—Ç–∞—Ç—É—Å—É –∫”©—Ä—Å”©—Ç“Ø–ª“Ø—à“Ø –∫–µ—Ä–µ–∫:
     - ‚úÖ –ö–∞—Ç—ã—à–∫–∞–Ω (–∂–∞—à—ã–ª)
     - ‚ùå –ö–∞—Ç—ã—à–ø–∞–≥–∞–Ω (–∫—ã–∑—ã–ª)
     - ‚è∞ –ö–µ—á–∏–∫–∫–µ–Ω (—Å–∞—Ä—ã)
     - –ë–µ–ª–≥–∏–ª–µ–Ω–µ —ç–ª–µ–∫ (–±–æ–∑)

### API —Ç–µ–∫—à–µ—Ä“Ø“Ø:

```bash
# Browser –∂–µ Postman –º–µ–Ω–µ–Ω
GET http://127.0.0.1:8000/api/v1/schedules/?group=2
Authorization: Bearer <your-token>

# Response:
{
  "results": [
    {
      "id": 313,
      "subject": {...},
      "teacher": {...},
      "day": "Monday",
      "attendance_status": "Present",  // ‚úÖ –ö–û–®–£–õ–î–£
      "attendance_text": "–ö–∞—Ç—ã—à–∫–∞–Ω"   // ‚úÖ –ö–û–®–£–õ–î–£
    }
  ]
}
```

## üìÅ ”®–∑–≥”©—Ä—Ç“Ø–ª–≥”©–Ω —Ñ–∞–π–ª–¥–∞—Ä

1. ‚úÖ `backend/core/serializers.py` - ScheduleSerializer'–≥–µ attendance –ø–æ–ª–µ–ª–µ—Ä–∏ –∫–æ—à—É–ª–¥—É

## üöÄ Production'–≥–æ —á—ã–≥–∞—Ä—É—É

### PythonAnywhere'–¥–µ –∂–∞“£—ã—Ä—Ç—É—É:

```bash
# 1. Code'–¥—É –∂–∞“£—ã—Ä—Ç—É—É (git pull)
cd ~/attendance-3
git pull origin main

# 2. Reload web app
# PythonAnywhere Dashboard > Web > Reload button
```

### Vercel'–¥–µ –∂–∞“£—ã—Ä—Ç—É—É:

Frontend ”©–∑–≥”©—Ä“Ø“Ø–ª”©—Ä –∂–æ–∫, –∞–Ω–¥—ã–∫—Ç–∞–Ω –∫–∞–π—Ä–∞ deploy –∫—ã–ª—É—É–Ω—É–Ω –∫–µ—Ä–µ–≥–∏ –∂–æ–∫.

## ‚úÖ –ù–∞—Ç—ã–π–∂–∞

- ‚úÖ –°—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä ”©–∑–¥”©—Ä“Ø–Ω“Ø–Ω –∞–∫—ã—Ä–∫—ã –∂—É–º–∞–ª—ã–∫ –∫–∞—Ç—ã—à—É—É –Ω–∞—Ç—ã–π–∂–∞—Å—ã–Ω –∫”©—Ä”© –∞–ª—ã—à–∞—Ç
- ‚úÖ –ê—Ç–∞-—ç–Ω–µ–ª–µ—Ä –±–∞–ª–¥–∞—Ä—ã–Ω—ã–Ω –∞–∫—ã—Ä–∫—ã –∂—É–º–∞–ª—ã–∫ –∫–∞—Ç—ã—à—É—É –Ω–∞—Ç—ã–π–∂–∞—Å—ã–Ω –∫”©—Ä”© –∞–ª—ã—à–∞—Ç
- ‚úÖ Attendance —Å—Ç–∞—Ç—É—Å—É –≤–∏–∑—É–∞–ª–¥—ã–∫ —Ç“Ø—Ä–¥”© –∫”©—Ä—Å”©—Ç“Ø–ª”©—Ç (—Ç“Ø—Å—Ç”©—Ä –∂–∞–Ω–∞ –∏–∫–æ–Ω–∫–∞–ª–∞—Ä)
- ‚úÖ –¢–µ–∫—Å—Ç –∫–æ—Ç–æ—Ä–º–æ—Å—É –±–∞—Ä (–ö—ã—Ä–≥—ã–∑—á–∞, –û—Ä—É—Å—á–∞, –ê–Ω–≥–ª–∏—Å—á–µ)
- ‚úÖ API –∞–≤—Ç–æ–º–∞—Ç—Ç—ã–∫ —Ç“Ø—Ä–¥”© —Ç—É—É—Ä–∞ attendance –º–∞–∞–ª—ã–º–∞—Ç—ã–Ω –∫–∞–π—Ç–∞—Ä–∞—Ç

## üí° –ö–æ—à—É–º—á–∞ –º–∞–∞–ª—ã–º–∞—Ç

### –ñ—É–º–∞–Ω—ã–Ω —ç—Å–µ–ø—Ç–µ–ª–∏—à–∏:
- **–î“Ø–π—à”©–º–±“Ø** = –ñ—É–º–∞–Ω—ã–Ω –±–∞—à—Ç–∞–ª—ã—à—ã
- **–ñ–µ–∫—à–µ–º–±–∏** = –ñ—É–º–∞–Ω—ã–Ω –∞—è–≥—ã
- `weekday()` –º–µ—Ç–æ–¥—É: 0=–î“Ø–π—à”©–º–±“Ø, 1=–®–µ–π—à–µ–º–±–∏, ..., 6=–ñ–µ–∫—à–µ–º–±–∏

### Attendance –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∏:
- –≠–≥–µ—Ä –±–∏—Ä –Ω–µ—á–µ attendance record –±–æ–ª—Å–æ, —ç“£ —Å–æ“£–∫—É—Å—É –∞–ª—ã–Ω–∞—Ç (`order_by('-date').first()`)
- –ë—É–ª –∂—É–º–∞–Ω—ã–Ω attendance'—ã –≥–∞–Ω–∞ –∫–∞—Ä–∞–ª–∞—Ç
- –≠–≥–µ—Ä attendance –∂–æ–∫ –±–æ–ª—Å–æ, "–ë–µ–ª–≥–∏–ª–µ–Ω–µ —ç–ª–µ–∫" –∫”©—Ä—Å”©—Ç“Ø–ª”©—Ç

---

**–¢“Ø–∑”©—Ç“Ø–ª–¥“Ø**: 17-–î–µ–∫–∞–±—Ä—å 2025
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–π–≥–∏–ª–∏–∫—Ç“Ø“Ø
**–ò—à—Ç–µ–π—Ç**: –õ–æ–∫–∞–ª–¥—ã–∫ –∂–∞–Ω–∞ Production'–¥–æ
